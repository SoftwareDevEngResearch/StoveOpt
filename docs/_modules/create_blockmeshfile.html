
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>create_blockmeshfile &#8212; StoveOpt  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for create_blockmeshfile</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Created on Thu Apr 25 11:26:04 2019</span>

<span class="sd">@author: Lee</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="sd">&quot;&quot;&quot; Goal is to take inputs from the import_geometry module and edit a blockmesh file template&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">from</span> <span class="nn">shutil</span> <span class="k">import</span> <span class="n">copyfile</span>
<span class="kn">from</span> <span class="nn">shutil</span> <span class="k">import</span> <span class="n">copy</span>

<span class="sd">&quot;&quot;&quot;Moving forward assuming the filepath is known for the Stoveopt master directory</span>
<span class="sd">In the future, the path and filename will be an argument for the software provided by user in input file&quot;&quot;&quot;</span>
<span class="n">block_mesh_template_fname</span> <span class="o">=</span> <span class="s2">&quot;blockMeshDict_Template_reactionfoam_empty&quot;</span> <span class="c1">#No file type</span>


<div class="viewcode-block" id="locate_blockmesh_template"><a class="viewcode-back" href="../index.html#create_blockmeshfile.locate_blockmesh_template">[docs]</a><span class="k">def</span> <span class="nf">locate_blockmesh_template</span><span class="p">(</span><span class="n">block_mesh_template_fname</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;the function uses the StoveOpt path and blockmesh template name to open the </span>
<span class="sd">    template version of the blockMeshDict file for editing in the system folder&quot;&quot;&quot;</span>
    <span class="c1"># Current working dir for stove opt master</span>
    <span class="n">path_StoveOpt_master</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
    <span class="c1"># Steps to system folder</span>
    <span class="n">dir_steps</span> <span class="o">=</span> <span class="s2">&quot;//foamfiles//counterFlowFlame2D//system//&quot;</span>
    <span class="n">blockmesh_template</span> <span class="o">=</span> <span class="n">path_StoveOpt_master</span> <span class="o">+</span> <span class="n">dir_steps</span> <span class="o">+</span> <span class="n">block_mesh_template_fname</span> <span class="c1"># location and path name of blockmesh template</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">blockmesh_template</span><span class="p">)</span>
    <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">blockmesh_template</span><span class="p">,</span><span class="s2">&quot;r&quot;</span><span class="p">)</span>
    <span class="c1">#print(f.read())</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;located template file in system folder&quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">system_folder</span> <span class="o">=</span> <span class="n">path_StoveOpt_master</span> <span class="o">+</span> <span class="n">dir_steps</span>
    <span class="k">return</span> <span class="n">blockmesh_template</span><span class="p">,</span> <span class="n">system_folder</span></div>

<div class="viewcode-block" id="update_blockmesh"><a class="viewcode-back" href="../index.html#create_blockmeshfile.update_blockmesh">[docs]</a><span class="k">def</span> <span class="nf">update_blockmesh</span><span class="p">(</span><span class="n">blockmesh_template</span><span class="p">,</span> <span class="n">system_folder</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Used to create (but not assign) a new name for the blockmesh file saving name to the blockMeshDict required for running--in the system folder&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">blockmesh_template</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="c1"># Save file with iterative name here (this is for future development..?)</span>
        <span class="n">saveLocation</span> <span class="o">=</span> <span class="n">system_folder</span>
        <span class="n">saveFileName</span> <span class="o">=</span> <span class="s2">&quot;blockMeshDict&quot;</span> <span class="c1"># Will need to be updated to save iteratively</span>
        <span class="n">saveName</span> <span class="o">=</span> <span class="n">saveLocation</span> <span class="o">+</span> <span class="n">saveFileName</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">saveName</span></div>

<div class="viewcode-block" id="rename_blockmesh"><a class="viewcode-back" href="../index.html#create_blockmeshfile.rename_blockmesh">[docs]</a><span class="k">def</span> <span class="nf">rename_blockmesh</span><span class="p">(</span><span class="n">saveName</span><span class="p">,</span> <span class="n">blockmesh_template</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Moving the file and renaming--Need to add an existence check&quot;&quot;&quot;</span>
    <span class="n">exists</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">saveName</span><span class="p">)</span> <span class="c1"># Will exist if a file named blockMeshDict is already in the location</span>
    <span class="k">if</span> <span class="n">exists</span><span class="p">:</span>
        <span class="c1"># Probably should either delete the current file there, or move it to obselete</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;blockmeshfile for run already exists--moving to obselete&quot;</span><span class="p">)</span>
        <span class="c1"># Still need to put this functionality in</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">blockmesh_template</span><span class="p">,</span> <span class="n">saveName</span><span class="p">)</span></div>

<span class="kn">import</span> <span class="nn">os</span>
<div class="viewcode-block" id="edit_blockmesh_template"><a class="viewcode-back" href="../index.html#create_blockmeshfile.edit_blockmesh_template">[docs]</a><span class="k">def</span> <span class="nf">edit_blockmesh_template</span><span class="p">(</span><span class="n">saveName</span><span class="p">,</span> <span class="n">pt0str</span><span class="p">,</span> <span class="n">pt1str</span><span class="p">,</span> <span class="n">pt2str</span><span class="p">,</span> <span class="n">pt3str</span><span class="p">,</span> <span class="n">pt4str</span><span class="p">,</span> <span class="n">pt5str</span><span class="p">,</span> <span class="n">pt6str</span><span class="p">,</span> <span class="n">pt7str</span><span class="p">,</span> <span class="n">pt8str</span><span class="p">,</span> <span class="n">pt9str</span><span class="p">,</span> <span class="n">pt10str</span><span class="p">,</span> <span class="n">pt11str</span><span class="p">,</span> <span class="n">pt12str</span><span class="p">,</span> <span class="n">pt13str</span><span class="p">,</span> <span class="n">pt14str</span><span class="p">,</span> <span class="n">pt15str</span><span class="p">,</span> <span class="n">pt16str</span><span class="p">,</span> <span class="n">pt17str</span><span class="p">,</span> <span class="n">pt18str</span><span class="p">,</span> <span class="n">pt19str</span><span class="p">,</span> <span class="n">pt20str</span><span class="p">,</span> <span class="n">pt21str</span><span class="p">,</span> <span class="n">pt22str</span><span class="p">,</span> <span class="n">pt23str</span><span class="p">,</span> <span class="n">pt24str</span><span class="p">,</span> <span class="n">pt25str</span><span class="p">,</span> <span class="n">pt26str</span><span class="p">,</span> <span class="n">pt27str</span><span class="p">,</span> <span class="n">pt28str</span><span class="p">,</span> <span class="n">pt29str</span><span class="p">,</span> <span class="n">pt30str</span><span class="p">,</span> <span class="n">pt31str</span><span class="p">,</span> <span class="n">pt32str</span><span class="p">,</span> <span class="n">pt33str</span><span class="p">,</span> <span class="n">pt34str</span><span class="p">,</span> <span class="n">pt35str</span><span class="p">,</span> <span class="n">pt36str</span><span class="p">,</span> <span class="n">pt37str</span><span class="p">,</span> <span class="n">pt38str</span><span class="p">,</span> <span class="n">pt39str</span><span class="p">,</span> <span class="n">pt40str</span><span class="p">,</span> <span class="n">pt41str</span><span class="p">,</span> <span class="n">pt42str</span><span class="p">,</span> <span class="n">pt43str</span><span class="p">,</span> <span class="n">pt44str</span><span class="p">,</span> <span class="n">pt45str</span><span class="p">,</span> <span class="n">pt46str</span><span class="p">,</span> <span class="n">pt47str</span><span class="p">,</span> <span class="n">pt48str</span><span class="p">,</span> <span class="n">pt49str</span><span class="p">,</span> <span class="n">pt50str</span><span class="p">,</span> <span class="n">pt51str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;open the blockmeshtemplate for edit, locate the positions needed, and overwrite the vertice lines&quot;&quot;&quot;</span>
    <span class="c1"># 703  is where  the cursor is immediately before the pt1 string</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">saveName</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">639</span><span class="p">)</span> <span class="c1">#pt1</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt0str</span> <span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt1str</span> <span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt2str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt3str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt4str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt5str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt6str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt7str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt8str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt9str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt10str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt11str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt12str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt13str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt14str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt15str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt16str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt17str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt18str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt19str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt20str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt21str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt22str</span> <span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt23str</span> <span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt24str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt25str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt26str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt27str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt28str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt29str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt30str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt31str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt32str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt33str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt34str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt35str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt36str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt37str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt38str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt39str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt40str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt41str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt42str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt43str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt44str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt45str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt46str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt47str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt48str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt49str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt50str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt51str</span><span class="o">+</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="move_bmesh_to_templatecase"><a class="viewcode-back" href="../index.html#create_blockmeshfile.move_bmesh_to_templatecase">[docs]</a><span class="k">def</span> <span class="nf">move_bmesh_to_templatecase</span><span class="p">(</span><span class="n">saveName</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Copy the previously edited blockmesh file to the template case system folder&quot;&quot;&quot;</span>
    <span class="n">current_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="c1"># current working directory</span>
    <span class="n">template_case_steps</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">foamfiles</span><span class="se">\\</span><span class="s2">counterFlowFlame2D</span><span class="se">\\</span><span class="s2">template_case</span><span class="se">\\</span><span class="s2">&quot;</span>
    <span class="n">system_steps</span> <span class="o">=</span> <span class="s2">&quot;system&quot;</span>
    
    <span class="n">source</span> <span class="o">=</span> <span class="n">saveName</span>
    <span class="n">destination</span> <span class="o">=</span> <span class="n">current_dir</span> <span class="o">+</span> <span class="n">template_case_steps</span> <span class="o">+</span> <span class="n">system_steps</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">destination</span><span class="p">)</span></div>
            
        
<span class="c1"># This should be run after the blockmesh and CFD case have been excecuted</span>
<div class="viewcode-block" id="replace_template"><a class="viewcode-back" href="../index.html#create_blockmeshfile.replace_template">[docs]</a><span class="k">def</span> <span class="nf">replace_template</span><span class="p">(</span><span class="n">path_StoveOpt_master</span><span class="p">,</span> <span class="n">block_mesh_template_fname</span><span class="p">,</span> <span class="n">dir_steps</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Move the template from the backup folder into the system folder for future edits</span>
<span class="sd">    Does not excecute if the template file is already there&quot;&quot;&quot;</span>
    <span class="n">templateFile</span> <span class="o">=</span> <span class="n">path_StoveOpt_master</span> <span class="o">+</span> <span class="n">dir_steps</span> <span class="o">+</span> <span class="s2">&quot;backup/&quot;</span> <span class="o">+</span> <span class="n">block_mesh_template_fname</span> <span class="c1"># template path/name</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">templateFile</span><span class="p">)</span>
    <span class="n">newFile</span> <span class="o">=</span> <span class="n">path_StoveOpt_master</span> <span class="o">+</span> <span class="n">dir_steps</span> <span class="o">+</span> <span class="n">block_mesh_template_fname</span> <span class="c1"># template path/name minus the backup folder</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">newFile</span><span class="p">)</span>
    <span class="n">exists</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">newFile</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">exists</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;template already in location&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">copyfile</span><span class="p">(</span><span class="n">templateFile</span><span class="p">,</span><span class="n">newFile</span><span class="p">)</span></div>

<span class="c1"># Edit the controlDict file--&gt; add the proper vertices for the temperature data, and for the composition data</span>
<div class="viewcode-block" id="modify_controlDict"><a class="viewcode-back" href="../index.html#create_blockmeshfile.modify_controlDict">[docs]</a><span class="k">def</span> <span class="nf">modify_controlDict</span><span class="p">(</span><span class="n">pt10str</span><span class="p">,</span> <span class="n">pt11str</span><span class="p">,</span> <span class="n">pt9str</span><span class="p">,</span> <span class="n">pt48str</span><span class="p">,</span> <span class="n">pt44str</span><span class="p">,</span> <span class="n">pt14str</span><span class="p">,</span> <span class="n">pt20str</span><span class="p">,</span> <span class="n">pt6str</span><span class="p">,</span> <span class="n">pt21str</span><span class="p">,</span> <span class="n">pt7str</span><span class="p">,</span> <span class="n">pt46str</span><span class="p">,</span> <span class="n">pt15str</span><span class="p">,</span> <span class="n">pt8str</span><span class="p">,</span> <span class="n">pt50str</span><span class="p">,</span> <span class="n">pt12str</span><span class="p">,</span> <span class="n">pt13str</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add the points to the controlDict file for the temperature data, and emissions data&quot;&quot;&quot;</span>
    <span class="n">current_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span> <span class="c1"># master StoveOpt directory</span>
    <span class="n">current_dir</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">current_dir</span><span class="p">)</span>
    <span class="n">template_case_steps</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">foamfiles</span><span class="se">\\</span><span class="s2">counterFlowFlame2D</span><span class="se">\\</span><span class="s2">template_case</span><span class="se">\\</span><span class="s2">system</span><span class="se">\\</span><span class="s2">&quot;</span>
    
    <span class="c1"># Path steps from StoveOpt to the case 25-150 case file</span>
    <span class="n">template_steps</span> <span class="o">=</span> <span class="s2">&quot;/foamfiles/counterFlowFlame2D/file_templates/blank/controlDict&quot;</span>
    <span class="n">replacement_template_steps</span> <span class="o">=</span> <span class="s2">&quot;/foamfiles/counterFlowFlame2D/file_templates/replacement/controlDict&quot;</span>
    <span class="n">steps_25</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\\</span><span class="s2">foamfiles</span><span class="se">\\</span><span class="s2">counterFlowFlame2D</span><span class="se">\\</span><span class="s2">case_25</span><span class="se">\\</span><span class="s2">system</span><span class="se">\\</span><span class="s2">controlDict&quot;</span>
    <span class="n">steps_50</span> <span class="o">=</span> <span class="s2">&quot;/foamfiles/counterFlowFlame2D/case_50/system/controlDict&quot;</span>
    <span class="n">steps_100</span> <span class="o">=</span> <span class="s2">&quot;/foamfiles/counterFlowFlame2D/case_100/system/controlDict&quot;</span> 
    <span class="n">steps_125</span> <span class="o">=</span> <span class="s2">&quot;/foamfiles/counterFlowFlame2D/case_125/system/controlDict&quot;</span>
    <span class="n">steps_150</span> <span class="o">=</span> <span class="s2">&quot;/foamfiles/counterFlowFlame2D/case_150/system/controlDict&quot;</span>
    
    <span class="c1"># Full paths</span>
    <span class="n">path_25</span> <span class="o">=</span> <span class="n">current_dir</span> <span class="o">+</span> <span class="n">steps_25</span>
    <span class="n">path_50</span> <span class="o">=</span> <span class="n">current_dir</span> <span class="o">+</span> <span class="n">steps_50</span>
    <span class="n">path_100</span> <span class="o">=</span> <span class="n">current_dir</span> <span class="o">+</span> <span class="n">steps_100</span>
    <span class="n">path_125</span> <span class="o">=</span> <span class="n">current_dir</span> <span class="o">+</span> <span class="n">steps_125</span>
    <span class="n">path_150</span> <span class="o">=</span> <span class="n">current_dir</span> <span class="o">+</span> <span class="n">steps_150</span>
    <span class="n">template_path</span> <span class="o">=</span> <span class="n">current_dir</span> <span class="o">+</span> <span class="n">template_steps</span>
    <span class="n">replacement_template_path</span> <span class="o">=</span> <span class="n">current_dir</span> <span class="o">+</span> <span class="n">replacement_template_steps</span>
    
    <span class="n">template_cases_path</span> <span class="o">=</span> <span class="n">current_dir</span> <span class="o">+</span> <span class="n">template_case_steps</span> <span class="c1"># where </span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;case template controlDict path&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">template_cases_path</span><span class="p">)</span>
    
    
    <span class="n">loc</span> <span class="o">=</span> <span class="mi">1504</span> <span class="c1"># position where the points entry begins</span>
    <span class="c1"># Open and edit template--add the probing points all around the cookstove currently includes back and front points</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">template_path</span><span class="p">,</span> <span class="s1">&#39;r+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
        <span class="c1">#f.write(&#39;(&#39; + &#39;\n&#39;)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt10str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt11str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt9str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt48str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>   
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt44str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt14str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>      
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt20str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt6str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt21str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt7str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>       
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt46str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt15str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>        
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt8str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt50str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>        
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt12str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;            &quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pt15str</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;);&#39;</span><span class="p">)</span>

    <span class="c1"># copy the controlDict file and paste to the case directories</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">template_path</span><span class="p">,</span> <span class="n">path_25</span><span class="p">)</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">template_path</span><span class="p">,</span> <span class="n">path_50</span><span class="p">)</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">template_path</span><span class="p">,</span> <span class="n">path_100</span><span class="p">)</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">template_path</span><span class="p">,</span> <span class="n">path_125</span><span class="p">)</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">template_path</span><span class="p">,</span> <span class="n">path_150</span><span class="p">)</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">template_path</span><span class="p">,</span> <span class="n">template_cases_path</span><span class="p">)</span>
    
    <span class="c1"># replace controlDict in the templates directory with the blank---not sure that this is actually necessary</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copyfile</span><span class="p">(</span><span class="n">replacement_template_path</span><span class="p">,</span> <span class="n">template_path</span><span class="p">)</span></div>


    
    
</pre></div>

          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">StoveOpt</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Liam J. Cassidy.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.5</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>